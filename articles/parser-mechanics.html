<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>rebib parser mechanics â€¢ rebib</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="rebib parser mechanics">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rebib</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/general-Introduction.html">Introduction to rebib</a></li>
    <li><a class="dropdown-item" href="../articles/general-usage.html">Using rebib in general</a></li>
    <li><a class="dropdown-item" href="../articles/parser-mechanics.html">rebib parser mechanics</a></li>
    <li><a class="dropdown-item" href="../articles/use-with-rjarticle.html">Using rebib with RJarticle</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Abhi-1U/rebib/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>rebib parser mechanics</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Abhi-1U/rebib/blob/main/vignettes/parser-mechanics.Rmd" class="external-link"><code>vignettes/parser-mechanics.Rmd</code></a></small>
      <div class="d-none name"><code>parser-mechanics.Rmd</code></div>
    </div>

    
    
<p>The magic behind rebib is a parser which parses bibliographic data
and assorts them according to the matching regular expressions.</p>
<div class="section level2">
<h2 id="stage-1-read-the-embedded-bibliography-block">Stage 1: Read the Embedded Bibliography Block<a class="anchor" aria-label="anchor" href="#stage-1-read-the-embedded-bibliography-block"></a>
</h2>
<p>This stage is a minor step where it reads the Embedded Bibliography
from the LaTeX document. This step also includes Filtering out the
commented code to avoid un-intended entries read.</p>
<p>Lastly, the data is broken down based on the LaTeX macro
<code>\\bibitem</code> as a marker for a new entry and this assorted
data is exported to a variable.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file_name</span> <span class="op">&lt;-</span> <span class="fu">rebib</span><span class="fu">:::</span><span class="fu">get_texfile_name</span><span class="op">(</span><span class="va">your_article_path</span><span class="op">)</span></span>
<span><span class="va">bib_items</span> <span class="op">&lt;-</span> <span class="fu">rebib</span><span class="fu">:::</span><span class="fu">extract_embeded_bib_items</span><span class="op">(</span><span class="va">your_article_path</span>,<span class="va">file_name</span><span class="op">)</span></span>
<span><span class="va">bib_items</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "\\bibitem[Ihaka, Ross and Gentleman, Robert]{ihaka:1996}"                          </span></span>
<span><span class="co">#&gt; [2] "Ihaka, Ross and Gentleman, Robert"                                                 </span></span>
<span><span class="co">#&gt; [3] "\\newblock \\emph{R: A Language for Data Analysis and Graphics.}"                  </span></span>
<span><span class="co">#&gt; [4] "\\newblock \\emph{Journal of Computational and Graphical Statistics}, 3:\\penalty0"</span></span>
<span><span class="co">#&gt; [5] "299--314, 1996."                                                                   </span></span>
<span><span class="co">#&gt; [6] "\\newblock URL : \\url{https://doi.org/10.1080/10618600.1996.10474713}"</span></span>
<span><span class="va">bib_items</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "\\bibitem[R Core Team]{R}"                                                                  </span></span>
<span><span class="co">#&gt; [2] "R Core Team"                                                                                </span></span>
<span><span class="co">#&gt; [3] "\\newblock R: A Language and Environment for Statistical Computing"                         </span></span>
<span><span class="co">#&gt; [4] "\\newblock \\emph{R Foundation for Statistical Computing}, Vienna, Austria \\penalty0 2016."</span></span>
<span><span class="co">#&gt; [5] "\\newblock URL : \\url{https://www.R-project.org/}, ISBN 3-900051-07-0"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="stage-2-regex-powered-parser">Stage 2: Regex Powered Parser<a class="anchor" aria-label="anchor" href="#stage-2-regex-powered-parser"></a>
</h2>
<p>Now, with the chunks of bibliographic entries, each is passed to a
parser which will break it down based on regular expressions. The logic
is to use the LaTeX macro <code>\\newblock</code> as a placeholder to
identify the position of text elements relative to it.</p>
<p>The first value to be parsed is the <code>unique_id</code> also
called the citation reference which is used to cite elements inside the
article. Usually, this is in the first or second line of the whole
entry. The position of the <code>unique_id</code> will determine the
position of the author names.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bib_items</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "\\bibitem[Ihaka, Ross and Gentleman, Robert]{ihaka:1996}"</span></span></code></pre></div>
<p>After reading the <code>unique_id</code>, the parser will attempt to
read the author name(s) <del>up to two lines long</del> (Usually this is
the case in most articles).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bib_items</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "Ihaka, Ross and Gentleman, Robert"</span></span></code></pre></div>
<p>Next, the title is extracted based on the position of the new blocks
or the end of the bib chunk.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bib_items</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "\\newblock \\emph{R: A Language for Data Analysis and Graphics.}"</span></span></code></pre></div>
<p>This way the crucial elements of the bibliographic entry (unique_id,
author names and title ) are parsed out.</p>
<p>The remaining data is stored as <code>journal</code> internally and
<code>publisher</code> when writing to a new BibTeX file.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bib_items</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "\\newblock \\emph{Journal of Computational and Graphical Statistics}, 3:\\penalty0"</span></span>
<span><span class="co">#&gt; [2] "299--314, 1996."                                                                   </span></span>
<span><span class="co">#&gt; [3] "\\newblock URL : \\url{https://doi.org/10.1080/10618600.1996.10474713}"</span></span></code></pre></div>
<p>A series of filters for ISBN, URL, pages and year fields are applied
to search for relevant data from the remaining data. If the data is not
available then it is set as NULL and will be skipped while writing the
BibTeX file. There is a lot of filtering of common LaTeX elements and
after that, the data remaining is stored in a structured format to be
written to a file.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bib_entry</span> <span class="op">&lt;-</span> <span class="fu">rebib</span><span class="fu">:::</span><span class="fu">bib_handler</span><span class="op">(</span><span class="va">bib_items</span><span class="op">)</span></span>
<span><span class="va">bib_entry</span></span>
<span><span class="co">#&gt; $book</span></span>
<span><span class="co">#&gt; $book[[1]]</span></span>
<span><span class="co">#&gt; $book[[1]]$unique_id</span></span>
<span><span class="co">#&gt; [1] "ihaka:1996"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[1]]$author</span></span>
<span><span class="co">#&gt; [1] "Ihaka, Ross and Gentleman, Robert"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[1]]$title</span></span>
<span><span class="co">#&gt; [1] "R: A Language for Data Analysis and Graphics"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[1]]$journal</span></span>
<span><span class="co">#&gt; [1] "Journal of Computational and Graphical Statistics 3:   :"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[1]]$year</span></span>
<span><span class="co">#&gt; [1] "1996"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[1]]$URL</span></span>
<span><span class="co">#&gt; [1] "https://doi.org/10.1080/10618600.1996.10474713"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[1]]$isbn</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[1]]$pages</span></span>
<span><span class="co">#&gt; [1] "299--314"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[2]]</span></span>
<span><span class="co">#&gt; $book[[2]]$unique_id</span></span>
<span><span class="co">#&gt; [1] "R"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[2]]$author</span></span>
<span><span class="co">#&gt; [1] "R Core Team"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[2]]$title</span></span>
<span><span class="co">#&gt; [1] "R: A Language and Environment for Statistical Computing"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[2]]$journal</span></span>
<span><span class="co">#&gt; [1] "R Foundation for Statistical Computing Vienna Austria    :"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[2]]$year</span></span>
<span><span class="co">#&gt; [1] "2016"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[2]]$URL</span></span>
<span><span class="co">#&gt; [1] "https://www.R-project.org/"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[2]]$isbn</span></span>
<span><span class="co">#&gt; [1] "3-900051-07-0"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[2]]$pages</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[3]]</span></span>
<span><span class="co">#&gt; $book[[3]]$unique_id</span></span>
<span><span class="co">#&gt; [1] "Tremblay:2012"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[3]]$author</span></span>
<span><span class="co">#&gt; [1] "A.~Tremblay"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[3]]$title</span></span>
<span><span class="co">#&gt; [1] "LMERConvenienceFunctions: A suite of functions to back-fit fixed effects and forward-fit random effects, as well as other miscellaneous functions., "</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[3]]$journal</span></span>
<span><span class="co">#&gt; [1] "R package version 1.6.8.2"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[3]]$year</span></span>
<span><span class="co">#&gt; [1] "2012"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[3]]$URL</span></span>
<span><span class="co">#&gt; [1] "http://CRAN.R-project.org/package=LMERConvenienceFunctions"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[3]]$isbn</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $book[[3]]$pages</span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="stage-3-bibtex-writer">Stage 3: BibTeX writer<a class="anchor" aria-label="anchor" href="#stage-3-bibtex-writer"></a>
</h2>
<p>After reading the bibliographic entries and splitting out meaningful
values from them, we can finally write a structured file in the BibTeX
format.</p>
<p>The writer will read the bib chunks one at a time based on the
metadata extracted and will write the corresponding data fields. The
default entry type is a book, which should not have any problems with
the web articles.</p>
<pre><code><span><span class="co">#&gt; Warning in file.remove(bib_path): cannot remove file</span></span>
<span><span class="co">#&gt; '/var/folders/zn/hj183dg15s713b47j2wlhwzw0000gn/T//RtmpUQS4iI/exampledir/article/example.bib',</span></span>
<span><span class="co">#&gt; reason 'No such file or directory'</span></span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rebib</span><span class="fu">:::</span><span class="fu">bibtex_writer</span><span class="op">(</span><span class="va">bib_entry</span>,<span class="va">file_path</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">your_article_path</span>,<span class="st">"example.bib"</span>,sep<span class="op">=</span><span class="st">"/"</span><span class="op">)</span><span class="op">)</span>,sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; @book{ihaka:1996,</span></span>
<span><span class="co">#&gt; author = {{Ihaka, Ross and Gentleman, Robert}},</span></span>
<span><span class="co">#&gt; title = {{R: A Language for Data Analysis and Graphics}},</span></span>
<span><span class="co">#&gt; publisher = {Journal of Computational and Graphical Statistics 3:   :},</span></span>
<span><span class="co">#&gt; pages = {299--314},</span></span>
<span><span class="co">#&gt; year = {1996},</span></span>
<span><span class="co">#&gt; url = {https://doi.org/10.1080/10618600.1996.10474713}</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; @book{R,</span></span>
<span><span class="co">#&gt; author = {R {Core Team}},</span></span>
<span><span class="co">#&gt; title = {{R: A Language and Environment for Statistical Computing}},</span></span>
<span><span class="co">#&gt; publisher = {R Foundation for Statistical Computing Vienna Austria    :},</span></span>
<span><span class="co">#&gt; year = {2016},</span></span>
<span><span class="co">#&gt; url = {https://www.R-project.org/},</span></span>
<span><span class="co">#&gt; isbn = {3-900051-07-0}</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; @book{Tremblay:2012,</span></span>
<span><span class="co">#&gt; author = {A.~{Tremblay}},</span></span>
<span><span class="co">#&gt; title = {{LMERConvenienceFunctions: A suite of functions to back-fit fixed effects and forward-fit random effects, as well as other miscellaneous functions., }},</span></span>
<span><span class="co">#&gt; publisher = {R package version 1.6.8.2},</span></span>
<span><span class="co">#&gt; year = {2012},</span></span>
<span><span class="co">#&gt; url = {http://CRAN.R-project.org/package=LMERConvenienceFunctions}</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
<p>I expect the authors who are converting the document to take a look
and check if there are any errors or missing values.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Put Together By Abhishek Ulayil.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
